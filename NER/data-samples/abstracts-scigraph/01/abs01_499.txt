Abstract The resource allocation problem and the timetabling problem are traditional kinds of NP-hard problems. Both problems can be found in universities where students can select courses they would like to attend before or after the timetabling is done. When demand exceeds capacity, the universities may allocate the available seats independently from the timetabling, but students may have then to decide which courses they are going to attend because of clashes in their timetable. To avoid this situation, some universities prepare their timetable considering students selection. In addition to that, students may submit preferences over courses, and the school administration has to assign seats and do the timetable considering both preferences and clashes. In this paper, both problems, seats allocation and timetabling, have been modeled separately and combined as constraint satisfaction optimization problems (CSOP). Two algorithms have been designed and implemented to find a solution to both problems simultaneously maximizing the satisfaction of students using a CSOP solver and an Ant colony optimization algorithm for the timetabling problem. The results of both algorithms are then compared. The allocation and timetabling procedures are based on preferences for courses defined by students, and on the administration’s constraints at Ecole Hôtelière de Lausanne. Three real data sets have been used to carry out a complete experimental analysis. High-quality solutions are obtained in a few minutes with both approaches; those solutions are currently used at Ecole Hôtelière de Lausanne.