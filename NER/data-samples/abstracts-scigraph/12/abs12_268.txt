Abstract Energy management in buildings is addressed in this paper. The energetic impact of buildings in the current energetic context is first depicted. Then the studied optimization problem is defined as the optimal management of production and consumption activities in houses. A scheduling problem is identified to adjust the energy consumption to both the energy cost and the inhabitant’s comfort. The available flexibilities of the services provided by domestic appliances are used to compute optimal energy plans. These flexibilities are associated to time windows or heating storage abilities. A constraints formulation of the energy allocation problem is given. A derived mixed linear program is used to solve this problem. The energy consumption in houses is very dependent to uncertain data such as weather forecasts and inhabitants’ activities. Parametric uncertainties are introduced in the home energy management problem in order to provide robust energy allocation. Robust linear programming is implemented. Event related uncertainties are also addressed through stochastic programming in order to take into account the inhabitant’s activities. A scenario based approach is implemented to face this robust optimization problem.