Abstract The propagation of solar waves through the sunspot of AR 9787 is observed by using temporal cross-correlations of SOHO/MDI Dopplergrams. We then use three-dimensional MHD numerical simulations to compute the propagation of wave packets through self-similar magnetohydrostatic sunspot models. The simulations are set up in such a way as to allow a comparison with observed cross-covariances (except in the immediate vicinity of the sunspot). We find that the simulation and the f-mode observations are in good agreement when the model sunspot has a peak field strength of 3 kG at the photosphere and less so for lower field strengths. Constraining the sunspot model with helioseismology is only possible because the direct effect of the magnetic field on the waves has been fully taken into account. Our work shows that the full-waveform modeling of sunspots is feasible.