Abstract PurposeA new in-vacuum three-dimensional Hall probe magnetic measurement system is under fabrication for characterizing the magnetic performance of the Cryogenic Permanent Magnet Undulator (CPMU). In order to fit the small gap (5 mm) of magnetic structure and vacuum environment, a small three-dimensional Hall probe has been manufactured. The angular and positional misalignment errors of the Hall sensors play an important role in the measurement accuracy of the CPMU. In order to minimize the misalignment errors, a method of calibrating angle error and relative assembly displacements of a three-dimensional Hall probe is carried out. MethodsThe angle error of Hall sensors will be calibrated by a standard dipole magnet and a five-dimensional Hall bench. The standard dipole magnet will generate a single direction and uniform magnetic field. And the five-dimensional Hall bench is used to rotate the Hall probe which is put in the center of magnet. Based on the relationship between angle and magnetic field strength, the angle error of each Hall sensor will be obtained. The relative position between the sensitive areas of the Hall sensors will be calibrated by a two-dimensional magnetic field undulator section. Based on Maxwellâ€™s equations, through the calculation of measurement magnetic field strength, the relative assembly displacements of the three Hall sensors can be derived. ResultsThe details of the calibration methods and the data processing of angle error and relative assembly displacements of a three-dimensional Hall probe are presented. The three-dimensional magnetic fields of a cryogenic permanent magnet undulator can be received accurately by correcting these angle errors and position errors of Hall sensors. ConclusionsThis paper illustrates the relative position and angle calibration procedures and the data processing of a three-dimensional Hall probe. Now the design of a smaller Hall probe is in process. The calibration of the angle errors and position errors will be carried out after the fabrication of the standard dipole magnet.