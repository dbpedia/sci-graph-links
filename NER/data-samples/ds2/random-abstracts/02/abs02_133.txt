Abstract Improvements to an existing method for calculating nonlinear force-free magnetic fields (Wheatland, Solar Phys.Â 238, 29, 2006) are described. In particular a solution of the 3-D Poisson equation using 2-D Fourier transforms is presented. The improved nonlinear force-free method is demonstrated in application to linear force-free test cases with localized nonzero values of the normal component of the field in the boundary. These fields provide suitable test cases for nonlinear force-free calculations because the boundary conditions involve localized nonzero values of the normal components of the field and of the current density, and because (being linear force-free fields) they have more direct numerical solutions. Despite their simplicity, fields of this kind have not been recognized as test cases for nonlinear methods before. The examples illustrate the treatment of the boundary conditions on current in the nonlinear force-free method, and in particular the limitations imposed by field lines that connect outside of the boundary region.